!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="ac38e429-8bd4-4f42-9593-dc2ea3bab1f1",e._sentryDebugIdIdentifier="sentry-dbid-ac38e429-8bd4-4f42-9593-dc2ea3bab1f1")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8025],{28987:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/examination-center/text-experience-center/cc_v2",function(){return t(67020)}])},24315:function(e,n,t){"use strict";t.d(n,{$:function(){return a},t:function(){return o}});var r,l=t(58177),s=t(96583),i=t(76293),o={upload:"/nezha/upload"},a=(r=(0,l._)(function(e){return(0,s.Jh)(this,function(n){switch(n.label){case 0:return[4,i.Z.post(o.upload,e,{headers:{"Content-Type":"multipart/form-data"}})];case 1:return[2,n.sent()]}})}),function(e){return r.apply(this,arguments)})},40158:function(e,n,t){"use strict";var r=t(45166),l=t(98703),s=t(11040),i=t(11527),o=t(20613),a=t(45928),c=t.n(a);n.Z=function(e){var n=e.children,t=e.className,a=e.type,u=e.danger,d=(0,s._)(e,["children","className","type","danger"]);return(0,i.jsx)(o.ZP,(0,l._)((0,r._)({},d),{className:"".concat(c().btn," ").concat(t," ").concat(c()[void 0===a?"default":a]," ").concat(u?c().danger:""),children:n}))}},15207:function(e,n,t){"use strict";var r=t(45166),l=t(98703),s=t(11527);t(50959);var i=t(58480);n.Z=function(e){var n=e.checked?"#1456f0":e.disabled?"#F2F3F5":"#C9CDD4";return(0,s.jsx)(i.Z,(0,l._)((0,r._)({},e),{style:{backgroundColor:n,opacity:1}}))}},18678:function(e,n,t){"use strict";var r=t(2106),l=t(11527),s=t(59394),i=t(21638),o=t(50959),a=t(20283),c=t.n(a);n.Z=function(e){var n=e.isOpen,t=e.onToggle,a=e.title,u=(0,r._)((0,o.useState)(!1),2),d=u[0],x=u[1],m=(0,o.useCallback)(function(){return x(!0)},[]),p=(0,o.useCallback)(function(){return x(!1)},[]);return(0,l.jsxs)("div",{className:c().splitterBar,children:[(0,l.jsx)("div",{className:c().splitterLine}),(0,l.jsx)(s.Z,{placement:"right",title:"".concat(n?"收起":"展开").concat(a||"历史对话"),overlayClassName:c().splitterTooltip,mouseLeaveDelay:0,destroyTooltipOnHide:!0,transitionName:"",children:(0,l.jsx)("div",{className:"".concat(c().splitterButton," ").concat(n?"":c().splitterIcon),onClick:t,onMouseEnter:m,onMouseLeave:p,children:(0,l.jsx)(i.Xs,{isActive:d})})}),(0,l.jsx)("div",{className:c().splitterLine})]})}},4404:function(e,n,t){"use strict";t.d(n,{Z:function(){return h}});var r=t(2106),l=t(11527),s=t(50959),i=t(6836),o=t(20613),a=t(57568),c=t(14240),u=t(43284),d=t(12113),x=t(21638),m=t(70757),p=function(e){var n=e.text,t=e.speed,r=void 0===t?50:t,i=e.className,o=e.onComplete,a=e.isCompleted,c=void 0!==a&&a,u=(0,s.useRef)(null),d=(0,s.useRef)(""),x=(0,s.useRef)(),m=(0,s.useRef)();return(0,s.useEffect)(function(){if(n){x.current&&clearTimeout(x.current),m.current&&cancelAnimationFrame(m.current);var e=function(){if(u.current){var t=u.current.textContent||"";if(t===n&&c){null==o||o();return}if(n.length<t.length){u.current.textContent=t.slice(0,-1),m.current=requestAnimationFrame(e);return}t.length<n.length&&(u.current.textContent=n.slice(0,t.length+1),m.current=requestAnimationFrame(function(){x.current=setTimeout(e,r)}))}};return e(),d.current=n,function(){x.current&&clearTimeout(x.current),m.current&&cancelAnimationFrame(m.current)}}},[n,r,o]),(0,l.jsx)("div",{ref:u,className:"whitespace-pre-wrap ".concat(void 0===i?"":i)})},f=function(e){var n=e.isEdited,t=e.isUser,r=e.stats;if(n)return(0,l.jsx)("div",{className:"text-xs text-[#C9CDD4] mt-[4px]",children:"已编辑"});if(!t){var s=r.totalTokens;return(0,l.jsx)("div",{className:"text-[12px] text-[#86909C] mt-2",children:(0,l.jsxs)("span",{children:["共调用",(0,l.jsxs)("span",{className:"text-[#181E25] font-bold",children:[" ",s," "]}),"tokens"]})})}return null};function h(e){var n=e.avatar,t=e.username,h=e.content,v=e.traceId,j=void 0===v?"":v,_=e.tokensPerSecond,b=e.totalTime,S=e.totalTokens,g=e.isUser,N=void 0!==g&&g,C=e.image_url,w=e.handleDeleteCallback,y=e.handleSaveEditCallback,E=e.onComplete,F=e.stream,T=e.streamCompleted,k=(0,r._)((0,s.useState)(!1),2),Z=k[0],J=k[1],A=(0,r._)((0,s.useState)(!1),2),M=A[0],L=A[1],R=(0,r._)((0,s.useState)(h),2),P=R[0],U=R[1],B=(0,s.useRef)(null);(0,s.useEffect)(function(){U(h)},[h]);var D=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"max-w-full break-words whitespace-pre-wrap ".concat(N?"bg-[#F7F8FA] text-[#181E25] rounded-bl-[24px] rounded-br-[2px]":"bg-[#ECF2FE] text-[#181E25] rounded-bl-[2px] rounded-br-[24px]"," rounded-tl-[24px] rounded-tr-[24px] px-4 py-3 text-[16px] leading-[28px]"),children:[(0,l.jsx)("div",{children:void 0!==F&&F?(0,l.jsx)(p,{speed:10,text:P,onComplete:void 0===E?function(){}:E,isCompleted:void 0!==T&&T}):P}),(0,l.jsx)(f,{isEdited:Z,isUser:N,stats:{tokensPerSecond:_,totalTime:b,totalTokens:S}})]}),(0,l.jsxs)("div",{className:"flex mt-2 ml-1 text-[#AAB1BA]",children:[j&&(0,l.jsx)(m.Z,{title:"复制TraceID",children:(0,l.jsx)("div",{onClick:function(){navigator.clipboard.writeText(j),(0,d.Kb)("复制traceId成功","success")},className:"cursor-pointer rounded-[4px] h-[28px] w-[28px] flex items-center justify-center mr-2 hover:bg-[#F7F8FA]",children:(0,l.jsx)(x.TI,{})})}),(0,l.jsx)(m.Z,{title:"删除",children:(0,l.jsx)("div",{onClick:function(){(0,d.Kb)("删除成功","success"),w&&w()},className:"cursor-pointer rounded-[4px] h-[28px] w-[28px] flex items-center justify-center mr-2 hover:bg-[#F7F8FA]",children:(0,l.jsx)(x.pJ,{})})}),(0,l.jsx)(m.Z,{title:"编辑",children:(0,l.jsx)("div",{onClick:function(){L(!0),setTimeout(function(){B.current&&B.current.focus({cursor:"end"})},0)},className:"cursor-pointer rounded-[4px] h-[28px] w-[28px] flex items-center justify-center hover:bg-[#F7F8FA]",children:(0,l.jsx)(x.n6,{})})})]})]}),I=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.Z.TextArea,{ref:B,value:P,onChange:function(e){return U(e.target.value)},autoSize:{minRows:3,maxRows:8},className:"mb-2 text-[#181E25] text-[16px] leading-[20px] rounded-[24px] px-4 py-3"}),(0,l.jsxs)("div",{className:"flex mt-2 ml-1 text-[#AAB1BA]",children:[(0,l.jsx)(o.ZP,{onClick:function(){return L(!1)},className:"border-[#E5E6EB] rounded-[16px] w-[70px] h-[32px] text-[14px] hover:border-[#1456F0] hover:text-[#1456F0]",children:"取消"},"cancel"),(0,l.jsx)(o.ZP,{type:"primary",onClick:function(){L(!1),J(!0),y&&y(P)},className:"bg-[#1456F0] rounded-[16px] w-[70px] h-[32px] text-[14px] ml-3",children:"确定"},"confirm")]})]});return(0,l.jsx)(a.ZP,{theme:{components:{Input:{activeBorderColor:"#1456f0",hoverBorderColor:"#1456f0",activeShadow:"none"}}},children:(0,l.jsx)("div",{className:"flex ".concat(N?"justify-end":"justify-start"," mb-6"),children:(0,l.jsxs)("div",{className:"flex flex-col ".concat(N?"items-end":"items-start"," max-w-3xl w-full"),children:[(0,l.jsxs)("div",{className:"flex flex-row items-center mb-[12px]",children:[(0,l.jsx)(c.C,{size:20,src:n,className:"mr-[6px]"}),(0,l.jsx)("span",{className:"font-[600]",children:t})]}),C&&(0,l.jsx)("div",{className:"mb-[6px]",children:(0,l.jsx)(u.Z,{preview:{maskClassName:"rounded-[12px]"},src:C,alt:"预览图",width:80,height:80})}),M?I:D]})})})}},97515:function(e,n,t){"use strict";var r=t(11527),l=t(50959),s=t(12926),i=t.n(s);n.Z=(0,l.memo)(function(e){var n=e.message,t=void 0===n?"上下文关系已清空，下方对话将不受上方内容影响":n;return(0,r.jsxs)("div",{className:i().clearBox,role:"separator","aria-label":t,children:[(0,r.jsx)("div",{className:i().clearLine}),(0,r.jsx)("p",{className:i().clearContent,children:t}),(0,r.jsx)("div",{className:i().clearLine})]})})},36736:function(e,n,t){"use strict";var r=t(11527);t(50959);var l=t(71886),s=t(21638),i=t(82096),o=t.n(i),a=t(7013),c=t.n(a),u=t(70757),d=function(e){var n=e.onEdit,t=e.onDelete;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center p-[12px_16px_12px_8px] hover:bg-[#F7F8FA] hover:rounded-[6px] cursor-pointer mb-[4px]",onClick:n,children:[(0,r.jsx)(c(),{priority:!0,width:20,height:20,src:s.gR,alt:"编辑"}),(0,r.jsx)("p",{className:"p-0 m-0 text-[14px] font-[400] text-[#181E25] leading-[19px] ml-[8px]",children:"编辑名称"})]}),(0,r.jsxs)("div",{className:"flex items-center p-[12px_16px_12px_8px] hover:bg-[#F7F8FA] hover:rounded-[6px] cursor-pointer mb-[4px]",onClick:t,children:[(0,r.jsx)(c(),{priority:!0,width:20,height:20,src:s.ap,alt:"删除"}),(0,r.jsx)("p",{className:"p-0 m-0 text-[14px] font-[400] text-[#F53F3F] leading-[19px] ml-[8px]",children:"删除对话"})]})]})};n.Z=function(e){var n=e.index,t=e.isHovered,i=e.onHover,a=e.onSelected,c=e.isSelected,x=e.onEdit,m=e.name,p=e.description,f=e.onDelete;return(0,r.jsxs)("div",{onMouseEnter:function(){return i(n)},onMouseLeave:function(){return i(null)},onClick:function(){return a(n)},className:"flex items-center justify-between p-[10px_16px_10px_24px] cursor-pointer hover:rounded-[16px] hover:bg-[#F7F8FA] mb-[8px] ".concat(t||c?"rounded-[16px] bg-[#F7F8FA]":""),children:[(0,r.jsxs)("div",{className:"flex-1 overflow-hidden min-w-0",children:[(0,r.jsx)("h2",{className:"p-0 m-0 text-[16px] font-[400] text-[#181E25] leading-[21px] mb-[4px]",children:m}),(0,r.jsx)(u.Z,{title:p,children:(0,r.jsx)("p",{className:"p-0 m-0 text-[13px] font-[400] text-[#86909C] leading-[17px] truncate max-w-full",children:p})})]}),(0,r.jsx)(l.Z,{arrow:!1,placement:"bottomLeft",trigger:["click"],content:(0,r.jsx)(d,{onEdit:x,onDelete:f}),overlayClassName:o().popover,children:(0,r.jsx)("div",{className:"ml-[12px] group",children:(0,r.jsx)(s.nX,{})})})]},n)}},30425:function(e,n,t){"use strict";var r=t(45166),l=t(98703),s=t(2106),i=t(11527),o=t(50959),a=t(6836),c=t(7013),u=t.n(c),d=t(39693),x=t.n(d),m=t(21638),p=t(20057),f=t(70757),h=t(61176),v=a.Z.TextArea,j=function(){return(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,i.jsx)("path",{d:"M9.23111 6.92265C9.13976 6.95257 9.05395 7.00226 8.98104 7.0717L4.34065 11.4911C4.08437 11.7352 4.08437 12.1309 4.34065 12.375L4.80469 12.8169C5.06097 13.061 5.47648 13.061 5.73277 12.8169L9.56379 9.16835L13.3152 12.7411C13.5715 12.9852 13.987 12.9852 14.2433 12.7411L14.7073 12.2992C14.9636 12.0551 14.9636 11.6594 14.7073 11.4153L10.0669 6.99588C9.83952 6.77931 9.48677 6.7549 9.23111 6.92265Z",fill:"#627084"})})};n.Z=function(e){var n=e.index,t=e.name,a=e.role,c=e.content,d=e.messages,_=e.setDescription,b=e.updateMessage,S=e.UpdateParameters,g=e.trackInfo,N=void 0===g?{}:g,C=(0,s._)((0,o.useState)(!1),2),w=C[0],y=C[1],E=(0,o.useRef)(null),F=(0,o.useRef)((0,p.Z)(function(){S()},1e3,{leading:!1})).current,T=(0,i.jsxs)("div",{className:x().card,children:[(0,i.jsxs)("header",{className:x().header,children:[(0,i.jsxs)("div",{className:x().left,children:[(0,i.jsx)(f.Z,{title:"对于bot的背景设定，支持通过增加bot_name添加多个",children:(0,i.jsx)("h1",{className:x().name,children:t})}),(0,i.jsx)("p",{className:"".concat(x().systemLabel),children:a})]}),(0,i.jsxs)("div",{className:x().editButton,onClick:function(){y(!0),(0,h.I)((0,r._)({event_name:"edit_bot_setting"},N)),setTimeout(function(){E.current&&E.current.focus({cursor:"end"})},0)},children:[(0,i.jsx)(u(),{src:m.dY,alt:"编辑设定",width:12,height:12}),(0,i.jsx)("p",{children:"编辑设定"})]})]}),(0,i.jsx)("section",{className:"".concat(x().content),children:c})]}),k=(0,i.jsxs)("div",{className:x().card,children:[(0,i.jsxs)("header",{className:x().header,children:[(0,i.jsxs)("div",{className:x().left,children:[(0,i.jsx)("h1",{className:x().name,children:t}),(0,i.jsx)("p",{className:x()["systemLabel-editing"],children:a})]}),(0,i.jsx)("div",{className:"group rounded-[4px] flex items-center justify-center cursor-pointer hover:bg-[#F7F8FA] h-[28px] w-[28px]",onClick:function(){y(!1)},children:(0,i.jsx)(j,{})})]}),(0,i.jsx)("section",{children:(0,i.jsx)(v,{ref:E,value:c,onChange:function(e){var t=d[n];b((0,l._)((0,r._)({},t),{content:e.target.value})),0===n&&_(e.target.value)},onBlur:function(){F()},autoSize:{minRows:1,maxRows:8},variant:"borderless",className:"text-[#45515E] p-0",style:{transition:"none",resize:"none"}})})]});return w?k:T}},85859:function(e,n,t){"use strict";var r=t(58177),l=t(2106),s=t(46453),i=t(96583),o=t(11527),a=t(50959),c=t(86244),u=t(50559),d=t(27385),x=t(25613),m=t(65288),p=t(70757),f=t(73739),h=function(){return(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",children:(0,o.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.48713 8.32144C8.60219 8.32144 8.69547 8.41471 8.69547 8.52977V9.14718C8.69547 9.26224 8.60219 9.35551 8.48713 9.35551H1.57046C1.45541 9.35551 1.36213 9.26224 1.36213 9.14718V8.52977C1.36213 8.41471 1.45541 8.32144 1.57046 8.32144H8.48713ZM6.48611 0.740277L6.51338 0.765391L8.05142 2.31096C8.21341 2.4738 8.21306 2.73702 8.05065 2.89944L7.8966 3.05324L3.41765 7.53783H1.82848C1.56862 7.53159 1.33213 7.33593 1.30583 7.04509L1.30469 7.01399V5.42482L5.63344 1.06237L5.6295 1.05847L5.92336 0.764617C6.07751 0.610463 6.3224 0.602349 6.48611 0.740277ZM5.06356 2.97989L2.23737 5.86208L2.98956 6.61547L5.84347 3.75979L5.06356 2.97989ZM6.3058 1.73765L5.71174 2.34401L6.48669 3.11896L7.0843 2.52073L6.3058 1.73765Z",fill:"#627084",className:"group-hover:fill-[#1456F0]"})})},v=function(){return(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",children:[(0,o.jsx)("g",{"clip-path":"url(#clip0_2092_9933)",children:(0,o.jsx)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.65518 8.07477C2.58521 8.14474 2.46254 8.1355 2.38118 8.05414L1.94461 7.61757C1.86325 7.53621 1.85401 7.41354 1.92398 7.34357L4.26911 4.99843L1.92389 2.65321C1.85392 2.58324 1.86316 2.46057 1.94452 2.37921L2.38109 1.94264C2.46245 1.86128 2.58512 1.85204 2.65509 1.922L5.00032 4.26723L7.34596 1.92159C7.41592 1.85162 7.5386 1.86086 7.61996 1.94222L8.05653 2.3788C8.13789 2.46015 8.14713 2.58283 8.07716 2.65279L5.73152 4.99843L8.07707 7.34399C8.14704 7.41395 8.1378 7.53662 8.05644 7.61798L7.61987 8.05456C7.53851 8.13592 7.41584 8.14515 7.34587 8.07519L5.00032 5.72964L2.65518 8.07477Z",fill:"#627084"})}),(0,o.jsx)("defs",{children:(0,o.jsx)("clipPath",{id:"clip0_2092_9933",children:(0,o.jsx)("rect",{width:"10",height:"10",fill:"white"})})})]})};n.Z=function(e){var n,t,j=e.placeholder,_=e.options,b=e.onSelect,S=e.onDeselect,g=e.onAdd,N=e.className,C=e.bordered,w=e.value,y=void 0===w?[]:w,E=e.onChange,F=e.disabled,T=e.isShowAddButton,k=void 0!==T&&T,Z=e.minCount,J=void 0===Z?0:Z,A=(0,a.useMemo)(function(){return y?Array.isArray(y)?y:[y]:[]},[y]),M=(0,l._)((0,a.useState)(void 0),2),L=M[0],R=M[1],P=(0,l._)((0,a.useState)(!1),2),U=P[0],B=P[1],D=(0,l._)((0,a.useState)(!1),2),I=D[0],Y=D[1],O=function(e){R(e),Y(!0)},V=function(){R(""),B(!0)};return(0,o.jsxs)("div",{className:"ant-select-selector ".concat(N),style:{padding:4,background:"#f5f5f5",borderRadius:16,minHeight:72},children:[(0,o.jsx)(u.Z,{wrap:!0,children:(0,o.jsx)(d.Z,{disabled:void 0!==F&&F,mode:"multiple",className:"py-[4px]",style:{minWidth:200},placeholder:void 0===j?"请输入角色名":j,tagRender:function(e){var n=e.label,t=e.value;return"add-button"===t?k?(0,o.jsx)(c.Z,{className:"bg-[#fff] text-[#1456F0] px-[12px] mb-[6px] hover:border-[#E3EBFD] border-[1px] border-[#F2F3F5] rounded-2xl h-[28px] text-[12px] flex items-center",icon:(0,o.jsx)(x.Z,{className:"mr-[-3px]"}),onClick:V,children:"添加"}):(0,o.jsx)("div",{}):(0,o.jsx)(c.Z,{color:"blue",closable:A.length>J,closeIcon:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"h-[8px] w-[1px] bg-[#E5E6EB] mx-[4px]"}),(0,o.jsx)(p.Z,{placement:"top",title:"删除",arrow:!0,children:(0,o.jsx)("div",{className:"flex items-center",children:(0,o.jsx)(v,{})})})]}),className:"text-[12px] mr-[4px] mb-[6px] rounded-2xl px-[12px] flex items-center h-[28px] text-[#000] hover:text-[#1456F0] hover:bg-[#ECF2FE] bg-[#fff] border-[#fff] hover:border-[#1456F0] group",onClose:function(){return S(t,{label:n,value:t})},style:{marginRight:3},children:(0,o.jsxs)("div",{className:"flex items-center",onClick:function(e){e.stopPropagation(),O(t)},children:[(0,o.jsx)("span",{className:"mr-[4px]",children:n}),(0,o.jsx)(h,{})]})},t)},onSelect:b,onDeselect:S,value:(0,s._)(A).concat(["add-button"]),open:!1,removeIcon:(0,o.jsx)(m.Z,{}),bordered:C,showSearch:!1,suffixIcon:null})}),(0,o.jsx)(f.Z,{title:(0,o.jsx)("div",{className:"text-[16px] text-[#181E25]",children:"编辑名称"}),open:I,initialValue:L,onCancel:function(){Y(!1)},onConfirm:(n=(0,r._)(function(e){return(0,i.Jh)(this,function(n){return(null==_?void 0:_.some(function(n){return n.value===e}))?[2,{code:-1,message:"".concat(e," 已存在，请重新编辑")}]:(L?(null==E||E(e,L),R(void 0)):b(e,{label:e,value:e}),[2,{code:0}])})}),function(e){return n.apply(this,arguments)})}),(0,o.jsx)(f.Z,{title:(0,o.jsx)("div",{className:"text-[16px] text-[#181E25]",children:"添加system"}),placeholder:"请输入system name",open:U,onCancel:function(){B(!1)},onConfirm:(t=(0,r._)(function(e){return(0,i.Jh)(this,function(n){return(null==_?void 0:_.some(function(n){return n.value===e}))?[2,{code:-1,message:"".concat(e," 已存在，请重新编辑")}]:(g(e),[2,{code:0}])})}),function(e){return t.apply(this,arguments)})})]})}},89443:function(e,n,t){"use strict";t.d(n,{i:function(){return d}});var r=t(58177),l=t(2106),s=t(96583),i=t(50959),o=t(13565),a=t(67780),c=t(12113),u=t(24315),d=function(){var e,n=(0,l._)((0,i.useState)(""),2),t=n[0],d=n[1],x=(0,l._)((0,i.useState)(!1),2),m=x[0],p=x[1],f=(0,l._)((0,i.useState)(null),2),h=f[0],v=f[1],j=(e=(0,r._)(function(e){return(0,s.Jh)(this,function(n){return"uploading"===e.file.status&&(p(!0),v(null)),"done"===e.file.status?(p(!1),d(e.file.response.fileUrl),(0,c.Kb)("".concat(e.file.name," 上传成功"),"success")):"error"===e.file.status&&(p(!1),v("上传失败"),(0,c.Kb)("".concat(e.file.name," 上传失败"),"error")),[2]})}),function(n){return e.apply(this,arguments)});return{imageUrl:t,isLoading:m,error:h,uploadProps:{name:"file",action:u.t.upload,headers:{Authorization:"Bearer ".concat((0,a.hP)())},beforeUpload:function(e){return e.type.startsWith("image/")?e.size/1024/1024<5||(o.ZP.error("图片大小不能超过 5MB"),!1):(o.ZP.error("请上传图片文件"),!1)},onChange:j,maxCount:1,accept:"image/*",showUploadList:!1},clearImage:function(){d(""),v(null)}}}},67020:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ey}});var r=t(2106),l=t(11527),s=t(50959),i=t(83856),o=t.n(i),a=t(44402),c=t(38063),u=t(21638),d=t(17197),x=t(58177),m=t(45166),p=t(98703),f=t(46453),h=t(96583),v=t(7013),j=t.n(v),_=t(36736),b=t(5367),S=t(17776),g=t(73739),N=t(19795),C=function(e){var n,t,i=e.show,o=(0,b.T)(),a=(0,b.C)(function(e){return e.chatCompletionV2}),c=a.paramsList,d=a.model,v=a.messages,C=(0,r._)((0,s.useState)(0),2),w=C[0],y=C[1],E=(0,r._)((0,s.useState)(null),2),F=E[0],T=E[1],k=(0,r._)((0,s.useState)(!1),2),Z=k[0],J=k[1],A=(0,r._)((0,s.useState)(!1),2),M=A[0],L=A[1],R=(0,s.useRef)(d);(0,s.useEffect)(function(){var e=c[w];e&&o((0,S.E9)((0,p._)((0,m._)({},e.content),{modalName:e.name,description:e.description,paramsResult:e._id})))},[o,c,w]),(0,s.useEffect)(function(){R.current===N.uP&&d!==N.uP&&requestAnimationFrame(function(){o((0,S.Z)([S.Bi]))}),R.current===N.TK&&d!==N.TK&&v.some(function(e){return(Array.isArray(null==e?void 0:e.content)?null==e?void 0:e.content:[]).some(function(e){return"image_url"===e.type})})&&requestAnimationFrame(function(){o((0,S.Z)([S.Bi].concat((0,f._)(d===N.uP?N.bH:[]))))}),R.current=d},[o,v,d]),(0,s.useEffect)(function(){y(0)},[c.length]);var P=(0,s.useCallback)(function(){J(!0)},[]),U=(0,s.useCallback)(function(){L(!0)},[]),B=(0,s.useCallback)(function(e){o((0,S.PT)(e))},[o]);return(0,l.jsx)("main",{className:"h-full overflow-hidden min-w-0 flex flex-col mr-[8.5px] transition-all duration-300 ".concat(i?"w-[266px]":"w-0"),children:(0,l.jsxs)("div",{className:"min-w-[163px] max-w-[266px] h-full flex flex-col",children:[(0,l.jsx)("header",{className:"cursor-pointer rounded-[16px] bg-[#ECF2FE] px-[15px] py-[9px] mb-[12px] hover:bg-[#E3EBFD]",children:(0,l.jsxs)("div",{onClick:U,className:"h-[26px] flex items-center justify-center",children:[(0,l.jsx)(j(),{src:u.Ug,alt:"添加对话",width:14,height:14}),(0,l.jsx)("p",{className:"p-0 m-0 text-[14px] font-[500] text-[#1456F0] leading-[20px] ml-[8px]",children:"创建新对话"})]})}),(0,l.jsxs)("div",{className:"flex items-center py-[8px]",children:[(0,l.jsx)(j(),{src:u.Dc,alt:"历史对话",width:16,height:16}),(0,l.jsx)("p",{className:"p-0 m-0 text-[16px] font-[500] text-[#181E25] leading-[21px] ml-[8px]",children:"历史对话"})]}),(0,l.jsx)("article",{className:"flex-1 overflow-y-auto mt-[8px] min-h-0",children:c.map(function(e,n){return(0,l.jsx)(_.Z,{index:n,isHovered:n===F,isSelected:n===w,onHover:function(e){return T(e)},onSelected:function(e){y(e)},onEdit:P,onDelete:function(){return B(e._id)},name:e.name,description:e.description},e._id)})}),(0,l.jsx)(g.Z,{title:(0,l.jsx)("div",{className:"text-[16px] text-[#181E25]",children:"编辑名称"}),open:Z,onCancel:function(){return J(!1)},onConfirm:(n=(0,x._)(function(e){return(0,h.Jh)(this,function(n){switch(n.label){case 0:return[4,o((0,S.U$)(e))];case 1:return n.sent(),[4,o((0,S._o)())];case 2:return n.sent(),J(!1),[2]}})}),function(e){return n.apply(this,arguments)})}),(0,l.jsx)(g.Z,{title:(0,l.jsx)("div",{className:"text-[16px] text-[#181E25]",children:"新建对话"}),placeholder:"请输入对话名称或其他备注信息",open:M,onCancel:function(){return L(!1)},onConfirm:(t=(0,x._)(function(e){return(0,h.Jh)(this,function(n){switch(n.label){case 0:return[4,o((0,S.zd)(e))];case 1:return n.sent(),L(!1),[2]}})}),function(e){return t.apply(this,arguments)})})]})})},w=t(18678),y=t(53024),E=t(37639),F=t(20613),T=t(80552),k=t.n(T),Z=t(10895),J=t.n(Z),A=t(65728),M=k()(function(){return Promise.all([t.e(6283),t.e(6347),t.e(4885)]).then(t.bind(t,34885))},{loadableGenerated:{webpack:function(){return[34885]}},ssr:!1}),L=function(){var e=(0,b.T)(),n=(0,b.C)(function(e){return e.chatCompletionV2}).codePreview,t=function(){e((0,S._w)(!1))};return n?(0,l.jsxs)(A.Z,{width:"663px",open:n,destroyOnClose:!0,footer:null,centered:!0,closeIcon:null,title:"代码预览",handleCancel:t,maskClosable:!1,className:"".concat(J()["code-preview-modal"]),children:[(0,l.jsx)("p",{className:"mt-[-4px] mb-[16px]",children:"你可以使用以下代码开始将当前参数与内容快速应用。"}),(0,l.jsx)("section",{className:"h-[500px]",children:(0,l.jsx)(M,{})}),(0,l.jsx)("div",{className:"flex justify-end mt-[15px]",children:(0,l.jsx)(F.ZP,{type:"primary",className:"w-[100px] h-[32px] text-[14px] bg-[#1456F0] rounded-[16px] hover:bg-[#4479F3] active:bg-[#0D44C5]",onClick:t,children:"知道了"})})]}):null},R=t(12113),P=t(61176),U=t(40158),B=function(e){var n=e.icon,t=e.label,r=e.onClick;return(0,l.jsxs)("div",{onClick:r,className:"cursor-pointer flex items-center h-[44px] px-[14px] py-[9px] rounded-[16px] bg-[#fff] border-[1px] border-solid border-[#E5E6EB] mr-[10px] hover:bg-[#F7F8FA] active:bg-[#E5E6EB]",children:[n,(0,l.jsx)("p",{className:"ml-[6px] p-0 m-0 text-[14px] text-[#181E25] font-[400] leading-[20px]",children:t})]})},D=function(e){var n=e.handleParamsCallback,t=e.handleCodePreview,i=void 0===t?function(){return null}:t,o=e.options,a=(0,b.T)(),c=(0,E.v9)(function(e){return e.chatCompletionV2}),d=c.model,x=c.messages,m=(0,r._)((0,s.useState)(!1),2),p=m[0],f=m[1],h=(0,r._)((0,s.useState)(""),2),v=h[0],j=h[1],_=[N.uP,N.Ao,N.kR],g=[{icon:(0,l.jsx)(u.S1,{}),title:"参数",onClick:n},{icon:(0,l.jsx)(u.rJ,{}),title:"代码预览",onClick:function(){(0,P.I)({event_name:"code_preview",sidebar_name:"ChatCompletion V2",model_name:d}),a((0,S._w)(!0)),i()}},{icon:(0,l.jsx)(u.dP,{}),title:"清除上下文",onClick:function(){x[x.length-1].role!==N.SJ.NULL?(a((0,S.Hz)({role:N.SJ.NULL,name:"分割线",content:""})),a((0,S.Og)())):(0,R.Kb)("暂无上下文可清除","warning"),(0,P.I)({event_name:"clear_all_click",sidebar_name:"ChatCompletion V2",model_name:d})}}],C=(0,s.useCallback)(function(e){return(j(e),d===N.uP&&e!==N.uP)?(f(!0),!1):x.some(function(e){return(Array.isArray(null==e?void 0:e.content)?null==e?void 0:e.content:[]).some(function(e){return"image_url"===e.type})})&&!_.includes(e)?(f(!0),!1):(a((0,S.j1)(e)),!0)},[d,x]);return(0,l.jsxs)("header",{className:"flex items-center justify-between mb-[32px]",children:[(0,l.jsx)(y.Z,{defaultValue:d,options:void 0===o?[]:o,onChange:C}),(0,l.jsxs)("div",{className:"flex items-center [&>div:last-child]:mr-0",children:[g.map(function(e,n){return(0,l.jsx)(B,{icon:e.icon,label:e.title,onClick:e.onClick},n)}),(0,l.jsx)(L,{})]}),(0,l.jsxs)(A.Z,{title:"切换模型",open:p,handleCancel:function(){return f(!1)},children:[(0,l.jsx)("div",{className:"text-[14px] text-[#181E25] my-[24px]",children:"因该模型不支持图片信息或群聊，因此切换后消息将清空，请确认是否切换"}),(0,l.jsxs)("div",{className:"m-0 p-0 flex items-center justify-end",children:[(0,l.jsx)(U.Z,{onClick:function(){return f(!1)},children:"取消"}),(0,l.jsx)(U.Z,{type:"primary",onClick:function(){a((0,S.j1)(v)),f(!1)},children:"确认切换"})]})]})]})},I=t(4404),Y=t(97515),O=t(30425);function V(){var e=(0,E.I0)(),n=(0,E.v9)(function(e){return e.chatCompletionV2}),t=n.messages,r=n.model,s=n.streamCompleted,i=function(n){var r=t.filter(function(e,t){return t!==n});e((0,S.Z)(r)),e((0,S._o)())},o=function(n,r){var l=t[n],s=(0,p._)((0,m._)({},l),{content:r});e((0,S.bu)({index:n,message:s})),e((0,S._o)())};return(0,l.jsx)("div",{children:t.map(function(n,a){var c,d,x,m,p,f,h=n.content;return(Array.isArray(n.content)&&(h=(null===(m=n.content.find(function(e){return"text"===e.type}))||void 0===m?void 0:m.text)||"",x=(null===(p=n.content.find(function(e){return"image_url"===e.type}))||void 0===p?void 0:null===(f=p.image_url)||void 0===f?void 0:f.url)||""),c=n.role,[N.SJ.SYSTEM,N.SJ.USER_SYSTEM,N.SJ.GROUP].includes(c))?(0,l.jsx)(O.Z,{index:a,name:n.name,role:n.role,trackInfo:{sidebar_name:"ChatCompletion V2",model_name:r},content:h,messages:t,setDescription:function(n){return e((0,S.nY)(n))},updateMessage:function(n){return e((0,S.bu)({index:a,message:n}))},UpdateParameters:function(){return e((0,S._o)())}},n.id||a):(d=n.role,[N.SJ.USER,N.SJ.ASSISTANT,N.SJ.TOOL].includes(d))?(0,l.jsx)(I.Z,{avatar:u.DA[n.role],username:n.name,content:h,image_url:x,traceId:n.traceId,tokensPerSecond:0,totalTime:0,totalTokens:n.totalTokens||0,stream:n.stream,isUser:n.messageType===S.Cs.SENDER,scrollToBottom:function(){return e((0,S.Og)())},handleDeleteCallback:function(){return i(a)},handleSaveEditCallback:function(e){return o(a,e)},onComplete:function(){return e((0,S._o)())},streamCompleted:s},n.id||a):n.role===N.SJ.NULL?(0,l.jsx)(Y.Z,{},n.id||a):void 0})})}var q=t(6836),H=t(50559),G=t(57568),z=t(47708),K=t(89443),W=t(49479),X=t(35955),$=t.n(X),Q=q.Z.TextArea,ee=function(){return(0,l.jsx)(j(),{className:"cursor-pointer",width:22,height:19,src:"https://filecdn.minimax.chat/public/fb7c85be-0e88-4a30-8eb1-7dcc5327cb07.png?x-oss-process=image/format,webp",alt:"下载"})},en=function(){return(0,l.jsx)(j(),{src:"https://filecdn.minimax.chat/public/70684736-f346-490d-bc06-05f2512d3153.png?x-oss-process=image/format,webp",alt:"loading",width:24,height:24})},et=function(e){var n=e.options,t=e.value,i=e.onChange,o=(0,r._)((0,s.useState)(!1),2),a=o[0],c=o[1];return(0,l.jsx)(W.Z,{value:t,popupClassName:$().selectDropdownCustom,dropdownStyle:{paddingLeft:"4px",paddingRight:"8px"},onChange:i,className:"w-[150px] mr-2 bg-[#F2F3F5] rounded-[24px] hover:bg-[#E5E6EB]",variant:"borderless",popupMatchSelectWidth:!1,options:n,optionRender:function(e){return(0,l.jsxs)(H.Z,{className:"flex items-center",children:[(0,l.jsx)("span",{role:"img",className:"flex items-center","aria-label":e.data.label,children:e.data.icon}),e.data.label]})},labelRender:function(e){var t=n.find(function(n){return n.value===e.value});return(0,l.jsxs)(H.Z,{className:"rounded-[12px] flex items-center overflow-hidden w-full text-ellipsis whitespace-nowrap",children:[(0,l.jsx)("span",{role:"img",className:"flex items-center","aria-label":null==t?void 0:t.label,children:null==t?void 0:t.icon}),null==t?void 0:t.label]})},suffixIcon:(0,l.jsx)("div",{style:{fontSize:"12px",color:"#86909C",transform:a?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s",pointerEvents:"none"},children:(0,l.jsx)(u.ve,{})}),onDropdownVisibleChange:function(e){return c(e)}})},er=function(e){var n=e.imageUrl,t=e.clearImage,r=e.loading;return void 0!==r&&r?(0,l.jsx)("div",{className:"bg-[#727375] w-[80px] h-[80px] mt-3 ml-3 rounded group flex items-center justify-center",children:(0,l.jsx)("div",{className:"animate-spin w-[24px] h-[24px]",children:(0,l.jsx)(en,{})})}):(0,l.jsx)("div",{className:"bg-[#F7F8FA] pt-3 pl-3 rounded-t-[16px] group",children:(0,l.jsxs)("div",{className:"relative inline-block",children:[(0,l.jsx)(j(),{src:n,alt:"预览图",width:80,height:80}),(0,l.jsx)("div",{className:"absolute cursor-pointer inset-0 bg-black bg-opacity-50 opacity-0 hover:opacity-100 transition-opacity duration-300 rounded",children:(0,l.jsx)(j(),{src:"https://filecdn.minimax.chat/public/41556c7c-4708-4f98-af1f-b14162d4cbdb.png?x-oss-process=image/format,webp",alt:"下载",width:16,height:16,className:"absolute right-[1px] top-[1px]",onClick:function(){return t()}})})]})})};function el(e){var n,t,i,o,a,c,d,v=e.maxLength,j=void 0===v?500:v,_=(0,b.T)(),g=(0,b.C)(function(e){return e.chatCompletionV2}),C=g.loading,w=g.activeRole,y=g.replyRole,E=g.messages,T=g.model,k=(0,r._)((0,s.useState)(),2),Z=k[0],J=k[1],A=E[E.length-1],M=(0,s.useMemo)(function(){return E.filter(function(e){return[N.SJ.SYSTEM].includes(e.role)})},[E]),L=(0,s.useMemo)(function(){return E.filter(function(e){return[N.SJ.SYSTEM,N.SJ.USER,N.SJ.USER_SYSTEM].includes(e.role)})},[E]),P=T===N.uP,U=[N.TK,N.Ao,N.kR].includes(T),B=(0,s.useMemo)(function(){return L.reduce(function(e,n){return e.some(function(e){return e.label===n.name||e.value===n.role})||e.push({value:"".concat(n.role,"-").concat(n.name),label:n.name,icon:u.DA[n.role]}),e},[{value:"".concat(N.SJ.USER,"-用户"),label:"用户",icon:u.DA[N.SJ.USER]}])},[L]),D=(0,s.useMemo)(function(){return M.reduce(function(e,n){return e.some(function(e){return e.label===n.name})||e.push({value:"".concat(N.SJ.ASSISTANT,"-").concat(n.name),label:n.name,icon:u.DA[N.SJ.ASSISTANT]}),e},[])},[M]);(0,s.useEffect)(function(){if(A&&(null==A?void 0:A.tool_calls)){var e,n,t;J(w),_((0,S.qD)({role:N.SJ.TOOL,tool_calls:null==A?void 0:A.tool_calls,name:(null==A?void 0:null===(e=A.tool_calls)||void 0===e?void 0:null===(n=e[0])||void 0===n?void 0:null===(t=n.function)||void 0===t?void 0:t.name)||"",content:""}))}},[A]);var I={value:"".concat(N.SJ.TOOL,"-").concat(null==A?void 0:null===(t=A.tool_calls)||void 0===t?void 0:null===(i=t[0])||void 0===i?void 0:null===(o=i.function)||void 0===o?void 0:o.name),label:(null==A?void 0:null===(a=A.tool_calls)||void 0===a?void 0:null===(c=a[0])||void 0===c?void 0:null===(d=c.function)||void 0===d?void 0:d.name)||"",icon:u.DA[N.SJ.TOOL]},Y=(0,r._)((0,s.useState)(""),2),O=Y[0],V=Y[1],q=(0,r._)((0,s.useState)(!1),2),H=q[0],W=q[1],X=(0,K.i)(),$=X.imageUrl,en=X.isLoading,el=X.uploadProps,es=X.clearImage,ei=(n=(0,x._)(function(e){return(0,h.Jh)(this,function(n){return V(e.target.value.slice(0,j)),[2]})}),function(e){return n.apply(this,arguments)}),eo=function(){if(!O&&!$)return(0,R.Kb)("发送的内容不能为空","error"),!1;var e,n,t=(null==w?void 0:w.role)||N.SJ.USER;return t===N.SJ.USER_SYSTEM?t=N.SJ.USER:t===N.SJ.SYSTEM&&(t=N.SJ.ASSISTANT),$?_((0,S.Hz)({role:t,name:(null==w?void 0:w.name)||"用户",content:[{type:"text",text:O},{type:"image_url",image_url:{url:$}}],messageType:S.Cs.SENDER})):_((0,S.Hz)({role:t,tool_call_id:(null==A?void 0:null===(e=A.tool_calls)||void 0===e?void 0:null===(n=e[0])||void 0===n?void 0:n.id)||void 0,name:(null==w?void 0:w.name)||"用户",content:O,messageType:S.Cs.SENDER})),Z&&(_((0,S.qD)(Z)),J(void 0)),V(""),es(),_((0,S.Og)()),!0},ea=function(){eo()&&_((0,S.lY)())},ec=(0,s.useMemo)(function(){return(null==w?void 0:w.role)===N.SJ.TOOL?[I]:(0,f._)(B).concat((0,f._)(Z?[I]:[]))},[null==w?void 0:w.role,B,Z,I]);return(0,l.jsxs)(G.ZP,{theme:{components:{Select:{optionSelectedBg:"#ECF2FE",optionActiveBg:"#F7F8FA"},Input:{activeBorderColor:"#1456f0",hoverBorderColor:"#1456f0"}}},children:[(0,l.jsxs)("div",{className:"my-[10px] flex",children:[(0,l.jsxs)("span",{className:"mr-[16px] flex items-center",children:["发送对象：",(0,l.jsx)(et,{options:ec,value:"".concat(null==w?void 0:w.role,"-").concat(null==w?void 0:w.name),onChange:function(e){if((0,f._)(B).concat([I]).find(function(n){var t=(0,r._)(e.split("-"),2),l=t[0],s=t[1],i=(0,r._)(n.value.split("-"),2),o=i[0],a=i[1];return l===o&&s===a})){var n=(0,r._)(e.split("-"),2),t=n[0],l=n[1];_((0,S.qD)({role:t,name:l,content:""}))}}})]}),P?(0,l.jsxs)("span",{className:"flex items-center",children:["回答对象：",(0,l.jsx)(et,{options:D,value:"".concat(null==y?void 0:y.role,"-").concat(null==y?void 0:y.name),onChange:function(e){if(D.find(function(n){var t=(0,r._)(e.split("-"),2),l=t[0],s=t[1],i=(0,r._)(n.value.split("-"),2),o=i[0],a=i[1];return l===o&&s===a})){var n=(0,r._)(e.split("-"),2),t=n[0],l=n[1];_((0,S.qE)({role:t,name:l,content:""}))}}})]}):null]}),(0,l.jsxs)("div",{style:{borderColor:H?"#1456F0":"#F7F8FA"},className:"flex flex-col justify-center w-full mx-auto relative max-w-[100%] bg-[#F7F8FA] border-solid border-[1px] hover:border-[#1456F0] rounded-[16px] transition duration-300 ease",children:[($||en)&&(0,l.jsx)(er,{loading:en,imageUrl:$,clearImage:es}),(0,l.jsx)("div",{className:"h-[12px] w-[0] bg-[#F7F8FA] rounded-t-[16px]"}),(0,l.jsx)(Q,{value:O,autoSize:{minRows:1,maxRows:5},onChange:ei,placeholder:"请输入要发送的信息",className:"text-[#181E25] text-[14px] min-h-[80px] bg-[#F7F8FA] px-[16px] pb-[12px] pt-[0] resize-none flex-grow leading-6 p-5 rounded-b-none ".concat($?"rounded-none":"rounded-t-[16px]"," border-[#F7F8FA] focus:shadow-none"),onFocus:function(){return W(!0)},onBlur:function(){return W(!1)},onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||e.nativeEvent.isComposing||(e.preventDefault(),ea())}}),(0,l.jsx)("div",{className:"px-[16px] py-[12px] h-[60px] bg-[#F7F8FA] rounded-b-[16px]",children:(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[U?(0,l.jsx)("span",{className:"text-sm text-[#14151A40]",children:(0,l.jsx)(z.Z,(0,p._)((0,m._)({disabled:en},el),{children:(0,l.jsx)(ee,{})}))}):(0,l.jsx)("span",{}),(0,l.jsxs)("div",{className:"space-x-2",children:[(0,l.jsx)(F.ZP,{onClick:eo,className:"h-[35px] border-[#E5E6EB] rounded-[18px] bg-[#FFFFFF] text-gray-600 w-[90px] hover:border-[#1456F0] hover:text-[#1456F0]",children:"添加信息"}),(0,l.jsx)(F.ZP,{loading:C,type:"primary",onClick:ea,className:"h-[35px] bg-[#1456F0] rounded-[18px] w-[90px]",children:"运行"})]})]})})]})]})}var es=function(){return(0,l.jsxs)("section",{className:"flex flex-col w-full max-w-[800px] h-[calc(100%-75px)] self-center",children:[(0,l.jsx)("div",{id:"chat-list-area",className:"flex flex-col flex-grow min-w-0 min-h-0 overflow-y-auto",children:(0,l.jsx)(V,{})}),(0,l.jsx)(el,{maxLength:1e6})]})},ei=t(29122),eo=t(8076),ea=t(83578),ec=t(65288),eu=t(75203),ed=t(85859),ex=t(15301),em=t.n(ex),ep=t(57158),ef=t(24582),eh=t(15207),ev=t(76365),ej=t(85130),e_=t(61322),eb=k()(function(){return Promise.all([t.e(1189),t.e(1003),t.e(1853),t.e(8888)]).then(t.bind(t,58888))},{loadableGenerated:{webpack:function(){return[58888]}}}),eS=eo.Z.Item,eg=function(e){var n,t,i=e.setIsShowParams,o=void 0===i?function(){}:i,a=(0,b.T)(),c=(0,E.v9)(function(e){return e.chatCompletionV2}),u=c.messages,d=c.tools,x=c.loading,h=c.replyRole,v=c.model,j=(0,e_.Z)(function(){return(0,ej.G)({setting_key:"front-end-app-settings-key"})}).data,_=(null==j?void 0:null===(n=j.home_setting)||void 0===n?void 0:null===(t=n.default_model_config)||void 0===t?void 0:t.ccv2)||[],g=(0,r._)(eo.Z.useForm(),1)[0],C=eo.Z.useWatch("function",g),w=eo.Z.useWatch("web_search",g),y=v===N.uP,F=v===N.TK,T=v===N.z3,k=v===N.Ao,Z=v===N.kR,J=F||T||Z||k,A=F||Z||k,M=(0,s.useMemo)(function(){return u.filter(function(e){return e.role===N.SJ.SYSTEM})},[u]),L=(0,s.useMemo)(function(){return u.filter(function(e){return e.role===N.SJ.USER_SYSTEM})},[u]),R=(0,s.useMemo)(function(){return u.filter(function(e){return e.role===N.SJ.GROUP})},[u]),P=(0,s.useMemo)(function(){return u.filter(function(e){return![N.SJ.SYSTEM,N.SJ.USER_SYSTEM,N.SJ.GROUP].includes(e.role)})},[u]);(0,s.useEffect)(function(){g.setFieldsValue((0,p._)((0,m._)({},c),{system:(null==M?void 0:M.map(function(e){return null==e?void 0:e.name}))||[],user_system:y?L.map(function(e){return null==e?void 0:e.name}):void 0,group:y?R.map(function(e){return null==e?void 0:e.name}):void 0}))},[c,y,M,L,R,g]),(0,s.useEffect)(function(){var e=(null==_?void 0:_[v])||(null==_?void 0:_.default)||{},n=e.temperature,t=e.top_p,r=e.tokens_to_generate;a((0,S.Js)({temperature:n,top_p:t,max_tokens:r}))},[v,j]),(0,s.useEffect)(function(){var e,n=(0,f._)(u),t=P;y?L.length||R.length||(n=(0,f._)(n).concat((0,f._)(N.bH))):(n=n.filter(function(e){return![N.SJ.USER_SYSTEM,N.SJ.GROUP].includes(e.role)}),(null==M?void 0:M.length)>1&&(n=n.filter(function(e){return e.role!==N.SJ.SYSTEM}),n=[null==M?void 0:M[0]].concat((0,f._)(n)),t=[],a((0,S.qE)({role:N.SJ.ASSISTANT,name:(null==M?void 0:null===(e=M[0])||void 0===e?void 0:e.name)||"MM智能助理",content:""})),a((0,S.pW)(0))));var r=(0,f._)(n.filter(function(e){return e.role===N.SJ.SYSTEM})).concat((0,f._)(n.filter(function(e){return e.role===N.SJ.USER_SYSTEM})),(0,f._)(n.filter(function(e){return e.role===N.SJ.GROUP})),(0,f._)(t));a((0,S.Z)(r))},[y,null==M?void 0:M.length]),(0,s.useEffect)(function(){var e=(0,f._)(d),n="none",t=w,r=C;if(F||Z||N.Ao){if(e=e.filter(function(e){return"web_search"!==e.type}),w&&e.push({type:"web_search"}),e=e.filter(function(e){return"function"!==e.type}),C){var l=d.find(function(e){return"function"===e.type});e.push(l||N.$n)}n=w||C?"auto":"none"}else if(T){if(e=(e=e.filter(function(e){return"web_search"!==e.type})).filter(function(e){return"function"!==e.type}),C){var s=d.find(function(e){return"function"===e.type});e.push(s||N.$n)}n=C?"auto":"none",t=!1}else e=(e=e.filter(function(e){return"web_search"!==e.type})).filter(function(e){return"function"!==e.type}),n="none",t=!1,r=!1;a((0,S.Js)({tool_choice:n,tools:e,web_search:t,function:r}))},[w,C,F,T,Z]);var U=function(e,n,t){var l=(0,f._)(u);switch(n){case N.SJ.SYSTEM:if(l=l.filter(function(e){return e.role!==N.SJ.SYSTEM}),y)l=t?(0,f._)(l).concat((0,f._)(M.map(function(n){return n.name===t?{role:N.SJ.SYSTEM,name:e,content:n.content}:n}))):(0,f._)(l).concat((0,f._)(M),[{role:N.SJ.SYSTEM,name:e,content:""}]);else{var s=(0,r._)(M,1)[0];l.push({role:N.SJ.SYSTEM,name:e,content:(null==s?void 0:s.content)||""})}h&&t===(null==h?void 0:h.name)&&a((0,S.qE)((0,p._)((0,m._)({},h),{name:e})));break;case N.SJ.USER_SYSTEM:if(l=l.filter(function(e){return e.role!==N.SJ.USER_SYSTEM}),y){var i=(0,r._)(L,1)[0];l.push({role:N.SJ.USER_SYSTEM,name:e,content:(null==i?void 0:i.content)||""})}break;case N.SJ.GROUP:if(l=l.filter(function(e){return e.role!==N.SJ.GROUP}),y){var o=(0,r._)(R,1)[0];l.push({role:N.SJ.GROUP,name:e,content:(null==o?void 0:o.content)||""})}break;default:return}t&&e&&(l=l.map(function(n){return n.name===t?(0,p._)((0,m._)({},n),{name:e}):n}));var c=(0,f._)(l.filter(function(e){return e.role===N.SJ.SYSTEM})).concat((0,f._)(l.filter(function(e){return e.role===N.SJ.USER_SYSTEM})),(0,f._)(l.filter(function(e){return e.role===N.SJ.GROUP})),(0,f._)(l.filter(function(e){return![N.SJ.SYSTEM,N.SJ.USER_SYSTEM,N.SJ.GROUP].includes(e.role)})));a((0,S.Z)(c)),a((0,S._o)())},B=function(e,n){var t=(0,f._)(u);switch(n){case N.SJ.SYSTEM:t.push({role:N.SJ.SYSTEM,name:e,content:""});break;case N.SJ.USER_SYSTEM:t.push({role:N.SJ.USER_SYSTEM,name:e,content:""});break;case N.SJ.GROUP:t.push({role:N.SJ.GROUP,name:e,content:""});break;default:return}var r=(0,f._)(t.filter(function(e){return e.role===N.SJ.SYSTEM})).concat((0,f._)(t.filter(function(e){return e.role===N.SJ.USER_SYSTEM})),(0,f._)(t.filter(function(e){return e.role===N.SJ.GROUP})),(0,f._)(t.filter(function(e){return![N.SJ.SYSTEM,N.SJ.USER_SYSTEM,N.SJ.GROUP].includes(e.role)})));a((0,S.Z)(r))},D=function(e,n){switch(n){case N.SJ.SYSTEM:t=c.messages.filter(function(n){return!(n.name===e&&n.role===N.SJ.SYSTEM)});break;case N.SJ.USER_SYSTEM:t=c.messages.filter(function(e){return e.role!==N.SJ.USER_SYSTEM});break;case N.SJ.GROUP:t=c.messages.filter(function(e){return e.role!==N.SJ.GROUP});break;default:return}var t,r=t.find(function(e){return e.role===N.SJ.SYSTEM});a((0,S.qE)({role:N.SJ.ASSISTANT,name:(null==r?void 0:r.name)||"",content:(null==r?void 0:r.content)||""})),a((0,S.Z)(t)),a((0,S._o)())},I=function(e,n){a((0,S.Js)((0,ei._)({},n,e)))};return(0,l.jsxs)("div",{className:"flex-[0_0_270px] py-[16px] px-[24px] overflow-y-auto",children:[(0,l.jsxs)("header",{className:"text-[16px] text-[#14151A] leading-[25px] font-[500] mb-[28px] flex items-center justify-between",children:["参数调试",(0,l.jsx)(ec.Z,{className:"text-[#627084] text-[12px] cursor-pointer",onClick:function(){return o(!1)}})]}),(0,l.jsxs)(eo.Z,{form:g,name:"basic",layout:"vertical",requiredMark:!1,validateTrigger:"onBlur",initialValues:c,onValuesChange:function(e){var n=(0,m._)({},e);a((0,S.Js)(n))},className:em().formStyle,children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"w-full mb-[14px]",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"text-[14px] text-[#14151A] leading-[20px] font-[400]",children:["max_tokens",(0,l.jsx)(ev.w,{title:(0,l.jsx)("div",{children:"最大生成token数"}),className:"ml-[4px]"})]}),(0,l.jsx)(ef.Z,{min:1,step:1,size:"small",disabled:x,max:N.i[v],controls:!1,value:c.max_tokens,className:em().inputNumber,onChange:function(e){return I(e,"max_tokens")}})]})}),(0,l.jsx)(eS,{name:"max_tokens",className:"mb-[22px]",required:!0,children:(0,l.jsx)(ep.Z,{disabled:x,min:1,max:N.i[v]})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"w-full mb-[10px]",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"text-[14px] text-[#14151A] leading-[20px] font-[400]",children:["temperature",(0,l.jsx)(ev.w,{title:(0,l.jsx)("div",{children:"较高的值将使输出更加随机，而较低的值将使输出加集中和确定。建议随机值和采样方法同时只调整其中一个"}),className:"ml-[4px]"})]}),(0,l.jsx)(ef.Z,{step:.01,min:.01,max:1,size:"small",controls:!1,disabled:x,value:c.temperature,className:em().inputNumber,onChange:function(e){return I(e,"temperature")}})]})}),(0,l.jsx)(eS,{required:!0,name:"temperature",className:"mb-[22px]",children:(0,l.jsx)(ep.Z,{disabled:x,min:.01,max:1,step:.01})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"w-full mb-[10px]",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex text-[14px] text-[#14151A] leading-[20px] font-[400]",children:["top_p",(0,l.jsx)(ev.w,{title:(0,l.jsx)("div",{children:"采样方法，数值越小结果确定性越强；数值越大，结果越随机"}),className:"ml-[4px]"})]}),(0,l.jsx)(ef.Z,{step:.01,size:"small",min:.01,max:1,controls:!1,disabled:x,value:c.top_p,className:em().inputNumber,onChange:function(e){return I(e,"top_p")}})]})}),(0,l.jsx)(eS,{required:!0,name:"top_p",children:(0,l.jsx)(ep.Z,{disabled:x,min:.01,max:1,step:.01})})]}),(0,l.jsx)(ea.Z,{className:"my-[30px]"}),(0,l.jsx)(eS,{required:!0,name:"stream",valuePropName:"checked",className:"relative mb-[".concat(C?-12:0,"px]"),label:(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsxs)("div",{className:"flex text-[14px] text-[#14151A] leading-[20px] font-[400]",children:["stream",(0,l.jsx)(ev.w,{title:(0,l.jsx)("div",{children:"是否通过流式分批返回结果。如果设置为true，结果分批返回，以一个换行为分割符"}),className:"ml-[4px]"})]})})}),children:(0,l.jsx)(eh.Z,{disabled:x,className:"absolute top-[-30px] right-[0]"})}),(0,l.jsx)(eS,{name:"function",valuePropName:"checked",className:"relative mb-[".concat(C?-12:0,"px]"),label:(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsxs)("div",{className:"flex text-[14px] text-[#14151A] leading-[24px] font-[400]",children:["functions",(0,l.jsx)(ev.w,{title:(0,l.jsx)("div",{children:"用户可自定义函数，模型根据输入和自定义函数描述匹配关系触发调用和生成JSON的函数列表，注意：不一定100%触发"}),className:"ml-[4px]"})]})})}),children:(0,l.jsx)(eh.Z,{disabled:!J||x,className:"absolute top-[-30px] right-[0]"})}),C?(0,l.jsx)(eS,{children:(0,l.jsxs)("div",{className:"flex justify-center items-center hover:bg-[#F7F8FA] h-[38px] px-[10px] py-[6px] bg-[#F2F3F5] text-[#1456F0] text-[12px] rounded-[16px] cursor-pointer",onClick:function(){a((0,S.Zl)(!0))},children:[(0,l.jsx)(eu.Z,{className:"mr-[6px]"}),(0,l.jsx)("span",{children:"编辑函数"})]})}):null,(0,l.jsx)(eS,{name:"web_search",valuePropName:"checked",label:(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsxs)("div",{className:"flex text-[14px] text-[#14151A] leading-[20px] font-[400]",children:["web_search",(0,l.jsx)(ev.w,{title:(0,l.jsx)("div",{children:"开启网络检索功能链路"}),className:"ml-[4px]"})]})})}),className:"mb-[-12px]",children:(0,l.jsx)(eh.Z,{disabled:!A||x,className:" absolute top-[-30px] right-[0]"})}),(0,l.jsx)(ea.Z,{}),(0,l.jsx)(eS,{name:"system",rules:[{required:!0,message:"请填写智能体名称"}],label:(0,l.jsx)("div",{className:"w-full mb-[4px]",children:(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsxs)("div",{className:"flex text-[14px] text-[#14151A] leading-[20px] font-[400]",children:["system",(0,l.jsx)(ev.w,{title:(0,l.jsx)("div",{children:"智能体名称，用于区分不同智能体"}),className:"ml-[4px]"})]})})}),children:(0,l.jsx)(ed.Z,{className:"py-[8px] px-[8px]",disabled:x,placeholder:"添加智能体名称",isShowAddButton:y,minCount:1,maxCount:y?20:1,onAdd:function(e){return B(e,"system")},onChange:function(e,n){return U(e,"system",n)},onSelect:function(e){return U(e,"system")},onDeselect:function(e){return D(e,"system")},options:M.map(function(e){return{value:null==e?void 0:e.name,label:null==e?void 0:e.name}}),bordered:!1})}),y&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eS,{name:"user_system",rules:[{required:!0,message:"请填写用户名称"}],label:(0,l.jsx)("div",{className:"w-full mb-[4px]",children:(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsxs)("div",{className:"flex text-[14px] text-[#14151A] leading-[20px] font-[400]",children:["user_system",(0,l.jsx)(ev.w,{title:(0,l.jsx)("div",{children:"用户名称"}),className:"ml-[4px]"})]})})}),children:(0,l.jsx)(ed.Z,{minCount:1,maxCount:1,bordered:!1,disabled:x,placeholder:"请填写用户名称",onAdd:function(e){return B(e,"user_system")},onChange:function(e,n){return U(e,"user_system",n)},onSelect:function(e){return U(e,"user_system")},onDeselect:function(e){return D(e,"user_system")},options:L.map(function(e){return{value:null==e?void 0:e.name,label:null==e?void 0:e.name}})})}),(0,l.jsx)(eS,{name:"group",rules:[{required:!0,message:"请填写群聊名称"}],label:(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)("div",{className:"flex items-center justify-between",children:(0,l.jsxs)("div",{className:"flex text-[14px] text-[#14151A] leading-[20px] font-[400]",children:["group",(0,l.jsx)(ev.w,{title:(0,l.jsx)("div",{children:"群聊名称"}),className:"ml-[4px]"})]})})}),children:(0,l.jsx)(ed.Z,{minCount:1,maxCount:1,bordered:!1,disabled:x,placeholder:"请填写群聊名称",onAdd:function(e){return B(e,"group")},onChange:function(e,n){return U(e,"group",n)},onSelect:function(e){return U(e,"group")},onDeselect:function(e){return D(e,"group")},options:R.map(function(e){return{value:null==e?void 0:e.name,label:null==e?void 0:e.name}})})})]})]}),(0,l.jsx)(eb,{})]})},eN=[{value:N.Ao,label:"MiniMax-Text-01",description:"全新架构，性能比肩全球领军模型，超长上下文，极致性价比"},{value:N.TK,label:N.TK,description:"速度快，效果好，适用于通用场景，特别是生产力场景的复杂任务"}],eC=t(28602),ew=t(35401),ey=(0,a.Z)(function(){var e=(0,b.T)(),n=(0,r._)((0,s.useState)(!0),2),t=n[0],i=n[1],a=(0,r._)((0,s.useState)(!1),2),x=a[0],m=a[1],p=(0,b.C)(function(e){return e.chatCompletionV2}),f=p.paramsList,h=p.model;(0,eC.Z)(u.Md,{top_nav_name:"examination-center",sidebar_name:"ChatCompletion V2"}),(0,s.useEffect)(function(){var e=localStorage.getItem("isHistoricalDialogueOpenCCV2");e&&i(JSON.parse(e))},[]),(0,s.useEffect)(function(){e((0,S.Sq)())},[e]),(0,ew.Z)(function(){(0,P.I)({event_name:"parameter_modify_click",sidebar_name:"ChatCompletion V2",model_name:h,clk_type:x?"1":"2"})},[x]),(0,s.useEffect)(function(){localStorage.setItem("isHistoricalDialogueOpenCCV2",JSON.stringify(t))},[t]);var v=(0,s.useCallback)(function(){i(function(e){return!e})},[]),j=(0,s.useCallback)(function(){m(function(e){return!e})},[]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o(),{children:(0,l.jsx)("title",{children:"ChatCompletion V2 - MiniMax 开放平台"})}),(0,l.jsxs)("main",{className:"w-full min-h-0 h-full flex flex-auto p-[8px_20px_20px_0] min-w-[1280px] overflow-x-auto",children:[(0,l.jsx)(c.default,{items:u.ev,defaultOpenKeys:["1","2"],defaultSelectedKeys:["1-1"]}),(0,l.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[(0,l.jsx)(d.Z,{}),(0,l.jsxs)("article",{className:"flex flex-auto h-[calc(100%-60px)]",children:[(0,l.jsxs)("div",{className:"min-w-0 flex-grow flex bg-white p-[16px] rounded-[24px]",children:[f.length>0?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(C,{show:t}),(0,l.jsx)(w.Z,{isOpen:t,onToggle:v})]}):null,(0,l.jsxs)("div",{className:"flex-1 flex flex-col min-w-[560px] min-h-0 h-full",children:[(0,l.jsx)(D,{handleParamsCallback:j,options:eN}),(0,l.jsx)(es,{})]})]}),(0,l.jsx)("div",{className:"".concat(x?"":"hidden"," min-w-[235px] max-w-[348px] ml-[20px] bg-white rounded-[24px] overflow-y-auto"),children:(0,l.jsx)(eg,{setIsShowParams:m})})]})]})]})]})})},35955:function(e){e.exports={selectDropdownCustom:"ChatInputArea_selectDropdownCustom__OSOPr"}},10895:function(e){e.exports={"code-preview-modal":"CodePreview_code-preview-modal__c6ecT"}},15301:function(e){e.exports={formStyle:"Preferences_formStyle__uDxjq",tooltip:"Preferences_tooltip__ZQN_n",inputNumber:"Preferences_inputNumber__JjLCf"}},45928:function(e){e.exports={btn:"MButton_btn__hrQTP",default:"MButton_default__p_mFH",primary:"MButton_primary__bNJd8",danger:"MButton_danger__Mi9Es"}},20283:function(e){e.exports={splitterBar:"Splitter_splitterBar__Zbt_a",splitterLine:"Splitter_splitterLine__FhYwX",splitterButton:"Splitter_splitterButton__Ku6rf",splitterIcon:"Splitter_splitterIcon__Tw7bK",splitterTooltip:"Splitter_splitterTooltip__h41j3"}},12926:function(e){e.exports={clearBox:"ContextClearLine_clearBox__vhdOB",clearLine:"ContextClearLine_clearLine__cH_Y0",clearContent:"ContextClearLine_clearContent__5seya"}},82096:function(e){e.exports={popover:"DialogueItem_popover__6FS1a"}},39693:function(e){e.exports={card:"EditableSystemCard_card__Egk3o",header:"EditableSystemCard_header__Em_4H",left:"EditableSystemCard_left__0Ue_1",name:"EditableSystemCard_name__kXmq4",systemLabel:"EditableSystemCard_systemLabel__wM5m_","systemLabel-editing":"EditableSystemCard_systemLabel-editing__8_BWH",editButton:"EditableSystemCard_editButton__CS_3V",content:"EditableSystemCard_content__Wq4IZ"}}},function(e){e.O(0,[582,4717,613,4917,2139,7385,8076,2050,8535,1322,3845,3246,7708,2273,7043,2839,4402,1638,7233,9774,2888,179],function(){return e(e.s=28987)}),_N_E=e.O()}]);